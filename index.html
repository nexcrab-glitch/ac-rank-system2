<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Assetto Corsa Championship</title>

<script src="https://unpkg.com/@motionone/dom/dist/motion.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --accent: #ff8c1a;
  --accent-soft: #ffb066;
  --bg: #050505;
  --glass: rgba(20, 20, 20, 0.65);
  --stroke: rgba(255, 255, 255, 0.08);
  --line: rgba(255,255,255,.08);
  --blur: 18px;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  background:
    radial-gradient(circle at 15% -10%, #262626, transparent 45%),
    radial-gradient(circle at 85% -10%, #1f1f1f, transparent 45%),
    linear-gradient(#050505, #050505);
  color: #fff;
  font-family: "Inter", system-ui, sans-serif;
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 50px 22px 90px;
}

h1 {
  color: var(--accent);
  margin-bottom: 34px;
  font-size: 32px;
}

.card,
.history-card {
  background: linear-gradient(
    180deg,
    rgba(255,255,255,.08),
    rgba(255,255,255,.02)
  ), var(--glass);

  backdrop-filter: blur(var(--blur));
  border: 1px solid var(--stroke);
  border-radius: 18px;
  box-shadow: 0 25px 60px rgba(0,0,0,.55);
  position: relative;
  overflow: hidden;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th {
  padding: 16px;
  background: rgba(255,255,255,.05);
  color: var(--accent);
  font-size: 12px;
  letter-spacing: .9px;
}

td {
  padding: 16px;
  text-align: center;
  border-bottom: 1px solid var(--line);
}

tbody tr:hover {
  background: rgba(255,255,255,.06);
}

.section-title {
  color: var(--accent);
  margin: 40px 0 18px;
}

#history {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.history-card {
  padding: 22px;
}

.track {
  font-size: 17px;
  color: var(--accent);
  margin-bottom: 10px;
  font-weight: 600;
}

.meta {
  opacity: .9;
  margin-bottom: 6px;
  font-size: 14px;
}

.fire {
  animation: flame .8s infinite alternate;
}

@keyframes flame {
  from { transform: scale(1); }
  to { transform: scale(1.3); }
}

footer {
  text-align: center;
  opacity: .5;
  margin-top: 70px;
  font-size: 13px;
}
</style>
</head>

<body>
<div class="container">

<h1>üèÅ Assetto Corsa Championship</h1>

<!-- LEADERBOARD -->
<div class="card">
  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Driver</th>
        <th>Pts</th>
        <th>R</th>
        <th>W</th>
      </tr>
    </thead>
    <tbody id="board"></tbody>
  </table>
</div>

<!-- HISTORY -->
<h2 class="section-title">üìú Race History</h2>
<div id="history"></div>

<footer>
  Assetto Corsa ‚Ä¢ Community Season
</footer>

</div>

<script>
const boardEl = document.getElementById("board");
const historyEl = document.getElementById("history");

function formatLap(ms) {
  if (!ms) return "-";
  const m = Math.floor(ms / 60000);
  const s = ((ms % 60000) / 1000).toFixed(3).padStart(6, "0");
  return `${m}:${s}`;
}

async function loadLeaderboard() {
  const res = await fetch("leaderboard.json");
  const data = await res.json();

  boardEl.innerHTML = data.map((d, i) => `
    <tr>
      <td>${i + 1}</td>
      <td>${d[0]}</td>
      <td>${d[1]}</td>
      <td>${d[2]}</td>
      <td>${d[3]}</td>
    </tr>
  `).join("");
}

async function loadHistory() {
  const res = await fetch("history.json");
  const data = await res.json();

  historyEl.innerHTML = "";

  if (!data.length) {
    historyEl.innerHTML = "<div style='opacity:.6'>No races yet</div>";
    return;
  }

  data.forEach(r => {
    const card = document.createElement("div");
    card.className = "history-card";

    card.innerHTML = `
      <div class="track">üó∫ ${r[0]}</div>
      <div class="meta">üèÜ Winner: <b>${r[1]}</b></div>
      <div class="meta">
        üî• Fastest Lap:
        <b>${r[2] || "-"}</b>
        ${r[2] ? "üî•" : ""}
        <span style="opacity:.6">(${formatLap(r[3])})</span>
      </div>
    `;

    historyEl.appendChild(card);
  });
}

loadLeaderboard();
loadHistory();
</script>

</body>
</html>
