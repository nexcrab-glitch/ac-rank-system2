<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Assetto Corsa Championship</title>
<script src="https://unpkg.com/@motionone/dom/dist/motion.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root {
  --accent: #ff8c1a;
  --accent-soft: #ffb066;
  --bg: #050505;
  --glass: rgba(20, 20, 20, 0.65);
  --stroke: rgba(255, 255, 255, 0.08);
  --line: rgba(255,255,255,.08);
  --blur: 18px;
}

/* ---------- BASE ---------- */
* { box-sizing: border-box; }

body {
  margin: 0;
  background:
    radial-gradient(circle at 15% -10%, #262626, transparent 45%),
    radial-gradient(circle at 85% -10%, #1f1f1f, transparent 45%),
    linear-gradient(#050505, #050505);
  color: #fff;
  font-family: "Inter", system-ui, sans-serif;
  overflow-x: hidden;
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 50px 22px 90px;
  animation: pageIn .7s cubic-bezier(.2,.8,.2,1);
}

@keyframes pageIn {
  from { opacity: 0; transform: translateY(14px); }
  to { opacity: 1; transform: translateY(0); }
}

h1 {
  color: var(--accent);
  margin-bottom: 34px;
  font-size: 32px;
  letter-spacing: .5px;
}

/* ---------- GLASS CARD BASE ---------- */
.card,
.history-card {
  background: linear-gradient(
    180deg,
    rgba(255,255,255,.08),
    rgba(255,255,255,.02)
  ), var(--glass);

  backdrop-filter: blur(var(--blur));
  -webkit-backdrop-filter: blur(var(--blur));

  border: 1px solid var(--stroke);
  border-radius: 18px;

  box-shadow:
    0 25px 60px rgba(0,0,0,.55),
    inset 0 1px 0 rgba(255,255,255,.06);

  position: relative;
  overflow: hidden;
}

/* soft glow edge */
.card::before,
.history-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  pointer-events: none;
  background: linear-gradient(
    120deg,
    transparent,
    rgba(255,140,26,.08),
    transparent
  );
}

/* ---------- LEADERBOARD ---------- */
table {
  width: 100%;
  border-collapse: collapse;
}

th {
  padding: 16px;
  background: rgba(255,255,255,.05);
  color: var(--accent);
  font-weight: 600;
  text-transform: uppercase;
  font-size: 12px;
  letter-spacing: .9px;
}

td {
  padding: 16px;
  text-align: center;
  border-bottom: 1px solid var(--line);
  transition: color .25s ease;
}

tr:last-child td {
  border-bottom: none;
}

tbody tr {
  transition:
    background .25s ease,
    transform .25s ease,
    box-shadow .25s ease;
}

tbody tr:hover {
  background: rgba(255,255,255,.06);
  transform: translateY(-2px);
  box-shadow: inset 0 0 0 999px rgba(255,140,26,.02);
}

/* ---------- HISTORY ---------- */
.section-title {
  color: var(--accent);
  margin-bottom: 18px;
  letter-spacing: .4px;
}

#history {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.history-card {
  padding: 22px;
  animation: floatIn .45s cubic-bezier(.2,.8,.2,1);
  transition:
    transform .35s ease,
    box-shadow .35s ease;
}

.history-card:hover {
  transform: translateY(-6px) scale(1.01);
  box-shadow:
    0 30px 70px rgba(0,0,0,.65),
    inset 0 1px 0 rgba(255,255,255,.08);
}

@keyframes floatIn {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

.track {
  font-size: 17px;
  color: var(--accent);
  margin-bottom: 10px;
  font-weight: 600;
}

.meta {
  opacity: .9;
  margin-bottom: 6px;
  font-size: 14px;
}

/* ---------- FLAME (UNCHANGED LOGIC) ---------- */
.fire {
  display: inline-block;
  animation: flame .8s infinite alternate;
}

@keyframes flame {
  from {
    transform: scale(1);
    filter: drop-shadow(0 0 6px #ff8c1a);
  }
  to {
    transform: scale(1.35);
    filter: drop-shadow(0 0 14px #ff6a00);
  }
}

/* ---------- FOOTER ---------- */
footer {
  text-align: center;
  opacity: .5;
  margin-top: 70px;
  font-size: 13px;
  letter-spacing: .4px;
}

/* ---------- RESPONSIVE ---------- */
@media (max-width: 700px) {
  h1 { font-size: 26px; }
}

</style>
</head>

<body>
<div class="container">

  <h1>üèÅ Assetto Corsa Championship</h1>

  <!-- LEADERBOARD -->
  <div class="card">
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Driver</th>
          <th>Pts</th>
          <th>R</th>
          <th>W</th>
        </tr>
      </thead>
      <tbody id="board"></tbody>
    </table>
  </div>

  <!-- HISTORY -->
  <h2 class="section-title">üìú Race History</h2>
  <div id="history"></div>

  <footer>
    Assetto Corsa ‚Ä¢ Community Season
  </footer>

</div>
<script>
document.addEventListener("DOMContentLoaded", () => {

  const boardEl = document.getElementById("board");
  const historyEl = document.getElementById("history");

  function formatLap(ms) {
    if (ms === null || ms === undefined) return "-";
    const m = Math.floor(ms / 60000);
    const s = ((ms % 60000) / 1000).toFixed(3).padStart(6, "0");
    return `${m}:${s}`;
  }

  async function loadLeaderboard() {
    const res = await fetch("leaderboard.json");
    const data = await res.json();

    boardEl.innerHTML = data.map((d, i) => `
      <tr>
        <td>${i + 1}</td>
        <td>${d[0]}</td>
        <td>${d[1]}</td>
        <td>${d[2]}</td>
        <td>${d[3]}</td>
      </tr>
    `).join("");
  }

  async function loadHistory() {
    const res = await fetch("history.json");
    const data = await res.json();

    historyEl.innerHTML = "";

    if (!data.length) {
      historyEl.innerHTML = "<div style='opacity:.6'>No races yet</div>";
      return;
    }

    data.forEach(r => {
      const card = document.createElement("div");
      card.className = "history-card";

      card.innerHTML = `
        <div class="track">üó∫ ${r[0]}</div>
        <div class="meta">üèÜ Winner: <b>${r[1]}</b></div>
        <div class="meta">
          üî• Fastest Lap:
          <b>${r[2] || "-"}</b>
          ${r[2] ? `<span class="fire">üî•</span>` : ""}
          <span style="opacity:.6">(${formatLap(r[3])})</span>
        </div>
      `;

      historyEl.appendChild(card);
    });
  }

  loadLeaderboard();
  loadHistory();

  setInterval(() => {
    loadLeaderboard();
    loadHistory();
  }, 15000);
});
</script>

</body>
</html>

